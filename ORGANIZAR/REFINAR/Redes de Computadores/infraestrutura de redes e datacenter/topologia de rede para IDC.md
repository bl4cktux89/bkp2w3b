O objetivo deste material é familiarizar o leitor com as topologias aplicadas em Data Centers. Quando falamos de topologias, estamos nos referindo à disposição e interconexão física dos equipamentos ou grupos de equipamentos. Subentende-se que o cabeamento horizonta e vertical, o _**backbone**_ e a rede externa estão devidamente conhecidos e instalados, portanto mostra-se aqui a forma como os equipamentos como _**switches**_, _**routers**_, _**storages**_ a automação e o gerenciamento estão interligados para compreendermos a funcionalidade destes conjuntos e, principalmente, como devemos proceder nos projetos para assegurarmos os serviços e a performance dos serviços.

A topologia de redes é um ponto fundamental no projeto de um Data Center. Esta topologia não existe porque os equipamentos existem e exigem, ou porque a norma determina. A razão de ser das diferentes topologias vem das necessidades de acessos dos clientes aos recursos oferecidos pelo Data Center. É isto que se procura garantir em um Data Center. Certo cliente pode estar utilizando um nível de acesso a bancos de dados gigantescos com milhares ou milhões de consultas, enquanto outro cliente precisa apenas que algum servidor possa ser acessado remotamente e sempre esteja disponível. São situações muito diferentes e o projetista de um data center deve estar familiarizado com estas diferentes utilizações para dividir um Data Center multi usuários de forma a investir corretamente nas várias áreas do Data Center. Por outro lado, cabe ao projetista da parte lógica, ou seja, o administrador de redes, produzir a melhor e mais otimizada topologia lógica para atender todo o tipo de cliente, utilizando o mínimo do tráfego da rede para os clientes que não necessitam mais e o melhor do tráfego para os clientes de alta densidade de acesso e volume de processos.

Antes de mais nada, vamos definir elementos que, muitas vezes, não são comuns a um administrador de redes. A metodologia aqui será mostrar a estrutura típica e depois explicar os termos e elementos novos. Observe que estaremos sempre colocando uma situação realística para Data Centers de grande médio para grande porte. Isto será benéfico para a preparação do leitor na atuação em Data Centers de qualquer porte.

Na figura 1, podemos observar uma estrutura típica da arquitetura topológica aplicada em Data Centers de médio porte.

[![](https://img.uninove.br/static/0/0/0/0/0/0/0/2/6/0/7/260748/15033.png)](https://img.uninove.br/static/0/0/0/0/0/0/0/2/6/0/7/260748/15033.png)

Figura 1. Arquitetura típica de um Data Center médio.

Fonte: [**Cabeamento estruturado para ambientes**](http://portal.furukawa.com.br/arquivos/Guia%20de%20Aplica%C3%A7%C3%A3o%20Data%20Center%202015/guia-de-aplicacao-data-center-2015.pdf) [**Data Center**](http://portal.furukawa.com.br/arquivos/Guia%20de%20Aplica%C3%A7%C3%A3o%20Data%20Center%202015/guia-de-aplicacao-data-center-2015.pdf) [](http://portal.furukawa.com.br/arquivos/Guia%20de%20Aplica%C3%A7%C3%A3o%20Data%20Center%202015/guia-de-aplicacao-data-center-2015.pdf)Página 16

A figura 1 é bastante esclarecedora. Um grupo de switches são responsáveis para consolidar as conexões e, como se pode observar, também disponibiliza o cruzamento entre vários outros caminhos gerando  redundância e garantindo disponibilidade. Estes switches são configurados de forma a promover acessos necessários de cada serviço para os respectivos recursos. Por exemplo, o servidor N (figura 1) é um servidor de aplicações executando um ERP (Sistema de Gestão Empresarial), como hipótese, e recebe o acesso de um usuário remoto. Este acesso pode vir pelo Switch de Agregação e usar qualquer switch para acessar este servidor que, por sua vez, utiliza qualquer outro caminho para chegar ao _**storage**_ e acessar os dados requeridos pelo ERP. Este mecanismo é garantido pela configuração de redes, sub-redes, VLANs. Ao utilizar  uma arquitetura como esta (fisicamente disposta), as possibilidades lógicas são muitas e é isto que faz a disponibilidade de um Data Center ser garantida, sob o ponto de vista de telecom. É preciso ter um certo cuidado com as normas para Data Centers, pois as mesmas garantem a parte de energia e de cabeamento físico, mas pouco contribuem para a correta configuração da topologia lógica do Data Center. Uma mudança para um Data Center de grande porte e de alta disponibilidade seria a arquitetura apresentada na figura 2.

[![](https://img.uninove.br/static/0/0/0/0/0/0/0/2/6/0/7/260716/15034.png)](https://img.uninove.br/static/0/0/0/0/0/0/0/2/6/0/7/260716/15034.png)

Figura 2: Arquitetura típica de um Data Center de grande porte e alta disponibilidade.

Fonte: [**Cabeamento estruturado para ambientes**](http://portal.furukawa.com.br/arquivos/Guia%20de%20Aplica%C3%A7%C3%A3o%20Data%20Center%202015/guia-de-aplicacao-data-center-2015.pdf) [**Data Center**](http://portal.furukawa.com.br/arquivos/Guia%20de%20Aplica%C3%A7%C3%A3o%20Data%20Center%202015/guia-de-aplicacao-data-center-2015.pdf) [](http://portal.furukawa.com.br/arquivos/Guia%20de%20Aplica%C3%A7%C3%A3o%20Data%20Center%202015/guia-de-aplicacao-data-center-2015.pdf)Página 16

Primeiramente observe que esta arquitetura não é excludente da figura 1. Simplesmente ela pode estar “convivendo” entre uma arquitetura mista. Isto é, como se o Data Center tem partes de um certo nível de serviço, como o co-location, onde, por exemplo,  um cliente tem um servidor de aplicações, outro servidor de banco de dados, ainda, outro servidor web e mais um servidor de backup. Tudo num só rack. Ele provavelmente utiliza o Data Center para que suas aplicações sejam sempre disponíveis para a internet, ou seja, utiliza o Data Center mais pela sua alta disponibilidade de telecom, mais sua capacidade de manter a energia 24x7.

Cabe aqui fazermos uma pequena parada para definir alguns novos elementos.

**Fabric:** O termo representa exatamente o que ele significa: **Tecido**. No mundo das redes de computadores já acostumamos com o próprio termo Redes (network), que pode facilmente ser comparado com uma rede de um pescador. O _**fabric**_ é mais que isto, é uma rede tão justa que é mais parecida com um tecido. Isto vem de uma necessidade dos Storages, onde a gravação e leitura de dados é tão volumosa, ou tão densa entre discos físicos diferentes, que se precisa de uma trama de muitos links para interconectar por vários caminhos e opções, estes discos.

**Storage:** Da mesma forma, o _**storage**_ é um equipamento, ou conjunto de equipamentos, cuja função é armazenar dados. Pode ser um simples banco de dados muito grande e com muito acesso, mas também pode ser algo que está sendo cunhado com o nome de _**big data. Big Data**_ é um conjunto de dados cuja formatação ou tipo de dado não é igual para toda a informação. Explicando melhor, a informação necessária para a empresa está um pouco em tabelas de bancos de dados, outra parte em textos de e-mail, outras informações são fotos, etc. Mas a empresa precisa desta informações indexadas de forma a serem úteis e é isto que está sendo chamado de _**big data.**_ Estes _**storages**_ são formados por _**arrays**_ cuja finalidade é garantir que os dados não se percam, que a velocidade de gravação/escrita seja ótima e que a de consulta/leitura também.

**Arrays:** Os arrays são configurações dentro da estrutura do storage (o sistema operacional e o software de gerenciamento de disco) que habilitam a criação de discos lógicos que estão em discos físicos diferentes, ou vários discos lógicos, mas que na verdade é apenas um disco físico. Além disto, estes arrays são configurados de forma a garantirem maior performance. Por exemplo, pode-se configurar uma situação onde é preciso gravar mil registros de uma só vez, mas o sistema do storage permite que sejam feitas várias gravações em discos diferentes ao mesmo tempo uma quinta parte dos registros para cada um dos discos, diminuindo a gravação para um quinto do tempo. Isto só é permitido pela existência dos arrays.

**Fabric + Storage + Arrays :** Bem, agora podemos entender porque precisamos de uma  topologia ou arquitetura como a apresentada na figura 2. Os links que aparecem na figura, geralmente são de fibra e a rede que aparece na figura é o que chamamos de SAN (_**Storage Area Network**_).

**SAN :** Uma SAN é uma rede para _**storage**_. Geralmente é montada em uma estrutura de fibras ópticas para alta performance. Mas, o que a torna tão diferenciada? É o que ela faz. Uma SAN coloca os recursos dos storages disponibilizados de forma que o usuário do disco (o sistema, o computador, o servidor) pensa estar lidando com uma simples placa SCSI (interface) dentro de seu próprio computador. Não precisa de um desenvolvedor de sistemas ou um usuário de grandes volumes de dados para imaginar que isto é um grande feito. Realmente a SAN revolucionou as condições pelas quais garantiram o lugar e importância que os Data Centers ocupam hoje no mercado. Isto tudo porque a SAN usa um protocolo de envelopamento (assim como um protocolo TCP/IP navegando por uma rede ATM) que permite para o usuário final mandar blocos de comunicação como faziam com sua placa de interface ao disco.

Como foi dito, geralmente a fibra óptica é o modelo físico de comunicação da SAN e, para isto, a SAN utiliza o protocolo FIBRE CHANNEL (FC). Este protocolo tem esta “fama” de trafegar bem os “pacotes” dirigidos à discos (no caso de interface SCSI, os blocos SCSI), mas o gerenciamento neste protocolo, assim como a configuração não é tarefa muito simples. Ocorre que está já bem adiantado o uso das interfaces iSCSI, cuja finalidade é facilitar o encapsulamento dos blocos SCSI em quadros Ethernet. Isto muda tudo. Ainda já se usa uma SAN virtual (VSAN) que está revolucionando esta tecnologia e facilitando mais ainda este processo de facilidades. Estas SANs controlam uma infinidade de discos. Veja um exemplo de um cluster de discos controlados por uma SAN na figura 3.

SAN + ETHERNET: Hoje o mercado está em plena migração para a união entre ETHERNET e FIBRE CHANNEL, criando o que é chamado de **UNIFIED FABRIC**.

[![](https://img.uninove.br/static/0/0/0/0/0/0/0/2/6/7/3/267333/15035.jpg)](https://img.uninove.br/static/0/0/0/0/0/0/0/2/6/7/3/267333/15035.jpg)

Figura 3: Cluster de Discos controlados por uma SAN

A literatura técnica sobre Data Centers é algo em ebolição. Por ser um momento de alto crescimento deste modelo de neÇµocio, a ciência da computação em conjunto com a prática, tem criado novos termos e/ou a aplicação de velhos termos para coisas diferentes. Um destes fatos é cunhar o termo **Topologia de Rede para Data Centers** para designar a maneira como os racks, em conjunção como os switches, são organizados, ou seja, se os switches de acesso estão no topo dos racks e ligam-se aos switches agregadores que estão num rack central ou, se no começo e no fim de cada fileira de racks existem os switches agregadores e os racks entre estes agregadores ligam-se a eles lateralmente. A esta forma de organizar os switches poderíamos chamar de topologia de montagem. Na verdade, a definição de como o CORE (Roteadores ou switches de alta concentração de trafego), AGREGATION (Switches de agregação de subconjuntos de racks) e o ACCESS (Switches de acesso aos servidores), são interligados para garantir as rotas de acessos e suas redundâncias é o que deveríamos chamar de topologia de rede.

Por outro lado, não podemos deixar de expor como o mercado tem tratado este assunto. Aquelas duas maneiras de montar os racks estão descritas abaixo.

_**Top-to-Rack**_

Esta é a montagem onde o rack contém os switches de acesso no topo. As ligações com os servidores ou storages são internas com patch cords de cobre ou fibra ou ambos. Destes switches parte o cabeamento horizontal para os switches agregadores ou de consolidação.

Esta topologia de montagem melhora a quantidade de cabeamento horizontal além de deixar o switch modular ou portável, facilitando uma futura migração para o _**Unified Fabric**_, pois o cobre fica no rack, diminuindo a obstrução do fluxo de ar, a atenuação dos cabos por não criar longos caminhos para os cabos, além de melhor organização para o gerenciamento da estrutura de cabeamento e, como uma das maiores vantagens, a relação custo benefício, pois um switch para 10GBASE-T que suporta 100 metros de distância de cabo é muito mais caro que um 10GBASE-T que é sensível apenas até 7 metros de distância.

_**End-of-Row**_

A topologia de montagem _**end-of-row**_ é um pouco diferente. Construindo os switches de acesso no primeiro e no último rack permite que os racks que encontram-se entre eles dirigirem seu cabeamento de acesso para cada um deles e em sentido oposto conseguindo uma redundância física interessante. Este cabeamento entre racks pode ser passado por calhas no topo dos racks ou ser passado por baixo do piso elevado. Uma variação para esta montagem é chamada de _**Middle of Row**_ onde os racks concentradores ficam no meio da fileira diminuindo o cabeamento, mas expondo a fileira a um possível acidente, pois os dois racks da ponta estarão no meio e juntos. Um vazamento de água vindo do teto pode parar a fileira toda.

Uma vantagem desta topologia é que se pode criar um gerenciamento por fileira e não por rack. Também no caso do _**end-of-row**_ temos uma diminuição do número de switches como um todo, mas por outro lado, perdemos a portabilidade do rack em casos de upgrades.

A rede de um Data Center não é uma rede. São várias redes de natureza e topologias diferenciadas para atender a multi propósitos de fornecer os recursos para cada cliente de forma otimizada, não apenas para atender, mas para atender bem, a baixo custo (ou o melhor custo possível) e com confiabilidade.

A evolução das redes está em alta velocidade. Por um lado a mídia de transmissão variando entre wifi, cabo de cobre e fibra óptica, e, de outro, redes LAN, SAN, FC, MPLS. Já ocorre a situação de existir uma rede SAN dispersa por roteamentos WAN usando fibra, estendida em cidades diferentes. Há muito por conhecer ainda. No momento, um dos desafios dos Data Centers, é a internet das coisas. Qual tipo de rede física, topologia lógica e protocolos atenderão este novo desafio?